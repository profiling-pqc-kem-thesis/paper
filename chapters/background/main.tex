\chapter{Background}
\label{chapter:background}


\section{Symmetric and Public-Key Cryptography}
Cryptographic functions are sorted into two categories - \textit{symmetric} functions and \textit{public-key} functions. Both categories refer to how the keys to the data are used\cite{bernstein2017}.

In the case of symmetric functions, the same key is known to both parties. The key is used for both encryption and decryption. Symmetric functions can also be used to provide authenticity - if only the two parties know of the secret key, one of them may request the other to prove possession of the key\cite{bernstein2017}.

In the case of public-key cryptography, each party is in possession of two keys - a public key and a private key. The public key is known to everyone, the private key only to the party in ownership of the keys. Anyone may encrypt a message using a party's public key, but only the owner of the private key may decrypt the contents. By using the private key to encrypt data, anyone with the public key may decrypt it. This mechanism provides a way to digitally sign a message and can be used to authenticate a party\cite{bernstein2017}. \todo{Mention quantum supremacy?}

\section{Key Establishment}

A key establishment protocol, sometimes referred to as a \gls{kex}, is a process in which two or more parties exchange a shared session key known only to them. The protocol should be able to be performed on an untrusted communication channel\cite{boyd2020:key-establishment}.

There are typically two classes of key establishment, key transport and key agreement.

A key transport protocol is a protocol where one party generates a shared key which is then securely transferred to one or more parties\cite{boyd2020:key-transport}.

In a key agreement protocol, the parties jointly influence the outcome of the shared key by deriving the key from information supplied by the involved parties. This should be performed in such a way that no single party can predetermine the resulting shared key on their own\cite{boyd2020:key-agreement}.

\subsection{Key Encapsulation Mechanism}

A \gls{kem} is form of key transport protocol designed to generate a new random shared key. The key is encapsulated in a form which can only be unpacked by the chosen recipient. \glspl{kem} are often more efficient than general encryption schemes and are therefore used in many key establishment designs\cite{boyd2020:key-encapsulation}.

\todo{Should this be more descriptive? boyd2020:key-encapsulation has information on a definition of the protocol}

\subsection{Forward Secrecy}

\subsection{Applications}

In \gls{tls}, key establishment is used to let to parties establish a shared symmetric key. Digital signatures are used to ensure the authenticity of the public keys used in the key establishment. The rest of the communication is secured using symmetric cryptography\cite{bernstein2017}.

In Wireguard...

In SSH...

\section{Post-Quantum}

Cryptography usually does not come with any guarantee of being secure forever. Algorithms and parameters are updated continuously to mitigate attacks as they are found and as already known attacks become more practical. As the performance of conventional computers have increased throughout the years, this has meant that some known attacks such as prime factorization and discrete logarithms have become more computationally feasible. The increase in performance has not yet lead to any major breakage as the algorithms in use are projected to withstand thousands of years of attacks using conventional algorithms. As Moore's law has come to a halt, the threat of traditional computers becoming powerful enough to break the cryptographic algorithms they use has become less severe.

Since \todo{when?}, research has been made to utilize quantum mechanics for computation, introducing the quantum computer. By utilizing quantum bits or qubits instead of the bits used in traditional computers, quantum computers are able to represent several states per qubit. This mechanic enables a quantum computer to feasibly perform calculations that have been deemed impossible or impractical on a traditional computer. Recent progress in the field has shown that, as progress have halted in the area of traditional computers, progress made on quantum computers has been increasing exponentially.

Parallel to the development of the theoretical quantum computer, algorithms were developed to make use of the mechanics. Two of these algorithms, Shor's algorithm and Grover's algorithm have been shown to threaten pre-quantum cryptographic systems. They have been shown to be impractical to implement or use on a traditional system, but feasible to use on a quantum computer.

The threat these algorithms and performance increases impose has led to a new epoch in computing and cryptography - post-quantum.
\todo[inline]{Cite prop-erly?}

\subsection{Shor's Algorithm}

Pre-Quantum public-key cryptography suites are based on one of the following problems being hard to solve; integer factorization and elliptic-curve discrete logarithm. Shor's algorithm can solve these problems, rendering the cryptosystems useless\cite{shor1997}. However, it is known to be difficult or impractical to run on a traditional computer, but easy to run efficiently for a quantum computer. But today's quantum computers are not powerful enough to execute Shor's algorithm on the large numbers used in modern cryptography\cite{bernstein2017}. A study \cite{gidney2019} suggests that it would require 20 million noisy qubits to break 2048 bits RSA. Today's most powerful quantum computer is Google's 53-qubits system\cite{google2019:quantum-computer} IBM's 65-qubits system\cite{ibm2020:quantum-computer}. IBM has a 1000-qubits system on their road map scheduled for release in 2023\cite{ibm2020:quantum-computer}.

\subsection{Grover's Algorithm}

\subsection{Bit Security}

Bit security corresponds to the best security a key of $n$ bits can provide under the best known attack. Values for some widely deployed cryptographic systems are presented in table \ref{table:background:post-quantum:bit-security}.

\begin{table}[H]
    \centering
    \caption{Security levels for widely deployed cryptographic systems and the bit security\cite{bernstein2017}. Pre-quantum and post-quantum refers to the bit security of the algorithm for the corresponding epoch.}
    \label{table:background:post-quantum:bit-security}
    \begin{tabularx}{\linewidth}{X c c c c}
        \toprule
        \thead{Name} & \thead{Function} & \thead{Pre-Quantum} & \thead{Post-Quantum} & \thead{Attack} \\
        \midrule
        \multicolumn{5}{c}{\thead[l]{Symmetric Cryptography}} \\
        %\midrule
        AES-128 & block cipher & 128 & 64 & Grover\\
        AES-256 & block cipher & 256 & 128 & Grover\\
        Salsa20 & stream cipher & 256 & 128 & Grover\\
        GMAC & MAC & 128 & 128 & -\\
        Poly1305 & MAC & 128 & 128 & -\\
        SHA-256 & hash & 256 & 128 & Grover\\
        SHA-3 & hash & 256 & 128 & Grover\\
        \multicolumn{5}{c}{\thead[l]{Public-key Cryptography}} \\
        %\midrule
        RSA-3072 & encryption & 128 & broken & Shor \\
        RSA-3072 & signature & 128 & broken & Shor \\
        DH-3072 & key exchange & 128 & broken & Shor \\
        DSA-3072 & signature & 128 & broken & Shor \\
        256-bit ECDH & key exchange & 128 & broken & Shor \\
        256-bit ECDSA & signature & 128 & broken & Shor \\
        \bottomrule
    \end{tabularx}
\end{table}

\section{Pre-Quantum Cryptography}
\label{section:background:pre-quantum}
% Establish today's use of cryptography, RSA and ECC

In the pre-quantum era of cryptography, several algorithms based on \gls{rsa} and \gls{ecc} were used for key exchange. Algorithms such as \gls{x25519} (in some contexts known as \gls{curve25519}\footnote{\href{https://mailarchive.ietf.org/arch/msg/cfrg/-9LEdnzVrE5RORux3Oo\_oDDRksU/}{https://mailarchive.ietf.org/arch/msg/cfrg/-9LEdnzVrE5RORux3Oo\_oDDRksU/}}), \gls{ecdh}, \gls{ecdhe}, \gls{dh}, \gls{dhe} are used to exchange session keys in TLS\footnote{\href{https://tools.ietf.org/html/rfc8446}{https://tools.ietf.org/html/rfc8446}}, SSH\cite{williams2011}, VPNs such as OpenVPN\footnote{\href{https://openvpn.net/community-resources/openvpn-cryptographic-layer/}{https://openvpn.net/community-resources/openvpn-cryptographic-layer/}}, IPSec\footnote{\href{https://tools.ietf.org/html/rfc2409}{https://tools.ietf.org/html/rfc2409}} and Wireguard\footnote{\href{https://www.wireguard.com/protocol/}{https://www.wireguard.com/protocol/}}.

Variants of the mentioned key exchange algorithms are also used in messaging applications such as the Signal protocol\cite{gordon2017}. Some of these algorithms and parameter sets are recommended for use in a pre-quantum era by organizations such as \gls{nist} and the \gls{ietf}, namely \gls{x25519}\footnote{\href{https://tools.ietf.org/html/rfc7748}{https://tools.ietf.org/html/rfc7748}}, \gls{ecdhe}\cite{nist2019} and \gls{dhe}\cite{nist2019}.

\section{Post-Quantum Cryptography}

Post-quantum cryptography relies on an entirely different set of underlying mathematical problems...

\section{The NIST Post-Quantum Standardization Process}
\gls{nist} is an American organization under the Department of Commerce. By advancing measurements, standards and technologies, the institute's goal is to promote U.S. innovation and industrial competitiveness\footnote{\href{https://www.nist.gov/about-nist}{https://www.nist.gov/about-nist}}.

The organization is split into various divisions. One of these divisions, the Computer Security Division, has assembled the Cryptographic Technology Group. The group focuses on the topics of cryptographic algorithms such as block ciphers, digital signatures, hash functions and post-quantum cryptography\footnote{\href{https://www.nist.gov/itl/csd/cryptographic-technology}{https://www.nist.gov/itl/csd/cryptographic-technology}}.

The Cryptographic Technology Group has previously held standardization processes for the globally used algorithm suites \gls{aes} and \gls{sha3}. January 3rd, 2017, the Cryptographic Technology Group posted another call for submissions to an open standardization contest. This time for post-quantum cryptography algorithms. The process was estimated to take three to five years with multiple rounds of submissions \footnote{\href{https://csrc.nist.gov/Projects/post-quantum-cryptography/post-quantum-cryptography-standardization/Call-for-Proposals}{https://csrc.nist.gov/Projects/post-quantum-cryptography/post-quantum-cryptography-standardization/Call-for-Proposals}}.

At the time of writing, the contest has been ongoing for three years and it has reached a third round of submissions. For the third round, \gls{nist} published finalists and alternate candidates grouped in public-key encryption and key-establishment algorithms as well as digital signature algorithms\footnote{\href{https://csrc.nist.gov/Projects/post-quantum-cryptography/round-3-submissions}{https://csrc.nist.gov/Projects/post-quantum-cryptography/round-3-submissions}}.

The public-key encryption and key-establishment algorithms finalists were the following.

\begin{itemize}
    \item Classic McEliece
    \item CRYSTALS-KYBER
    \item NTRU
    \item SABER
\end{itemize}

The digital signature finalists were the following.

\begin{itemize}
    \item CRYSTALS-DILITHIUM
    \item FALCON
    \item Rainbow
\end{itemize}

\subsection{IND-CCA2}

\gls{nist} has identified that a relevant attack on post-quantum \glspl{kem} is a chosen-ciphertext attack. Resistence to such an attack is referred to as \gls{ind-cca2} security\cite{nist2017}.

\subsection{Security Categories}

\gls{nist} anticipated that submissions to the standardization effort would face uncertainties in terms of estimating the security strength of post-quantum algorithms. They state that the uncertainties are largely caused by two issues. The first issue is the possibility that new attacks will be discovered and the second that there is a limited ability to predict how a quantum computer will behave in terms of cost, speed and memory\cite{nist2017}.

\gls{nist} therefore defined security categories that are not based on the traditional measure of bit security. The following categories were defined. The order denotes the strength of the attack\cite{nist2017}.

\begin{itemize}
    \item 1. Any attack that breaks the relevant security definition must require computational resources comparable to or greater than those required for key search on a block cipher with a 128-bit key (e.g. AES128)
    \item 2. Any attack that breaks the relevant security definition must require computational resources comparable to or greater than those required for collision search on a 256-bit hash function (e.g. SHA256/ SHA3-256)
    \item 3. Any attack that breaks the relevant security definition must require computational resources comparable to or greater than those required for key search on a block cipher with a 192-bit key (e.g. AES192)
    \item 4. Any attack that breaks the relevant security definition must require computational resources comparable to or greater than those required for collision search on a 384-bit hash function (e.g. SHA384/ SHA3-384)
    \item 5. Any attack that breaks the relevant security definition must require computational resources comparable to or greater than those required for key search on a block cipher with a 256-bit key (e.g. AES 256)
\end{itemize}

\subsection{OWCPA}

\section{Lattice-Based Key Encapsulation Mechanisms}

\subsection{NTRU}

\todo{include security category}

\subsection{CRYSTALS-KYBER}

\todo{include security category}

\subsection{SABER}

\todo{include security category}

\section{Code-Based Key Encapsulation Mechanisms}

\subsection{Classic McEliece}

\todo{include security category}

\section{Performance Optimization}

"Theoretical" topics on performance optimization

\subsection{SIMD}

Vectorization ...

\section{CPU Architectures}

Alla datorer är inte likadana. Olika instruktionsset, o.s.v. Det finns massvis med olika.

\section{Consumer and Server Hardware}

x86, ARM, RISC-V. RISC vs CISC. 

\subsection{AVX}

AVX2 = AVX-256

\section{Mainframe Hardware}

IBM Z, POWER. RISC. Co-processorer. Mycket ändras när man går från x86 till mainframe. Man kan inte mäta instruktioner etc. som vanligt. En instruktion kan göra mycket.

\subsection{CPACF}

\subsection{HSM}
